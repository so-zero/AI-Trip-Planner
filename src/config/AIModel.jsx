import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "저렴한 예산으로 커플을 위한 3일 동안 서울에 대한 여행 계획을 생성하세요. 호텔 이름, 호텔 주소, 가격 호텔 이미지 URL, 지리 좌표, 평가, 설명이 포함된 호텔 옵션 목록을 제공하고 장소 이름, 장소 세부 정보, 장소 이미지 URL, 지리 좌표, 티켓 가격, 평가가 포함된 여행 일정을 제안하세요.  방문하기 가장 좋은 시간과 함께 각 데이터 계획을 사용하여 3일 동안 갈 수 있는 여러곳의 각 위치의 시간 여행을 제공하는 JSON 형식의 데이터를 제공해주세요.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "여행 계획": {\n    "기간": 3,\n    "목적지": "서울",\n    "예산": "저렴함",\n    "여행 스타일": "커플",\n    "최적의 방문 시간": "봄(4월-5월) 또는 가을(9월-10월)이 온화한 날씨와 아름다운 단풍으로 가장 좋습니다.",\n    "호텔 옵션": [\n      {\n        "이름": "호텔 인사동",\n        "주소": "서울특별시 종로구 인사동길 46-2",\n        "가격": "1박 50,000원부터",\n        "이미지 URL": "https://www.hotelscombined.com/images/hotel/12345/large_thumb.jpg",\n        "지리 좌표": "37.5700, 126.9827",\n        "평가": 4.5,\n        "설명": "인사동 한가운데 위치한 저렴하고 편안한 호텔입니다. 인근에 다양한 전통 음식점과 상점이 있습니다."\n      },\n      {\n        "이름": "이비스 앰배서더 서울 강남",\n        "주소": "서울특별시 강남구 테헤란로 144",\n        "가격": "1박 60,000원부터",\n        "이미지 URL": "https://www.hotelscombined.com/images/hotel/67890/large_thumb.jpg",\n        "지리 좌표": "37.5089, 127.0300",\n        "평가": 4,\n        "설명": "강남 지역에 위치한 저렴하고 현대적인 호텔입니다. 쇼핑과 나이트라이프를 즐기기에 좋은 위치입니다."\n      },\n      {\n        "이름": "명동 게스트하우스",\n        "주소": "서울특별시 중구 명동2가 50-4",\n        "가격": "1박 30,000원부터",\n        "이미지 URL": "https://www.hotelscombined.com/images/hotel/11122/large_thumb.jpg",\n        "지리 좌표": "37.5622, 126.9789",\n        "평가": 4.2,\n        "설명": "명동 한가운데 위치한 저렴한 게스트하우스입니다. 다양한 음식점과 상점이 가까이에 있습니다."\n      }\n    ],\n    "여행 일정": [\n      {\n        "날짜": "1일차",\n        "장소": "경복궁",\n        "장소 세부 정보": "조선시대 왕궁으로 아름다운 건축물과 넓은 정원을 자랑합니다.",\n        "이미지 URL": "https://www.visitkorea.or.kr/images/img_detail_181228173214837.jpg",\n        "지리 좌표": "37.5780, 126.9777",\n        "티켓 가격": "성인 10,000원",\n        "평가": 4.8,\n        "시간 여행": "오전 9시: 경복궁 입장하여 아름다운 건축물과 정원을 감상합니다. 궁궐 내부를 돌아보며 조선시대 왕실의 생활을 엿볼 수 있습니다. 12시: 근처 북촌 한옥마을에서 전통 한옥 건축물과 아기자기한 골목길을 탐험합니다. 1시: 북촌 한옥마을에서 점심을 즐깁니다. 2시: 인사동 거리를 걸으며 전통 공예품과 미술품을 감상하고 기념품을 구매합니다. 4시: 인사동 거리에서 차를 마시며 휴식을 취합니다. 5시: 숙소로 돌아와 휴식을 취합니다. 7시: 저녁 식사를 위해 인근 맛집을 찾아 즐거운 시간을 보냅니다."\n      },\n      {\n        "날짜": "2일차",\n        "장소": "남산 한옥마을",\n        "장소 세부 정보": "전통 한옥으로 조성된 마을로 한국 전통 건축을 체험하고 전통 문화 공연을 관람할 수 있습니다.",\n        "이미지 URL": "https://www.visitkorea.or.kr/images/img_detail_181228173214837.jpg",\n        "지리 좌표": "37.5507, 126.9879",\n        "티켓 가격": "무료",\n        "평가": 4.6,\n        "시간 여행": "오전 10시: 남산 한옥마을에서 한국 전통 건축을 체험하고 전통 문화 공연을 관람합니다. 12시: 한옥마을 내 음식점에서 점심을 즐깁니다. 1시: 남산공원을 산책하며 서울 도심의 아름다운 전망을 감상합니다. 3시: 남산타워에 올라 서울 야경을 감상합니다. 5시: 남산타워에서 내려와 숙소로 돌아와 휴식을 취합니다. 7시: 이태원에서 저녁 식사를 즐기며 다양한 문화를 체험합니다."\n      },\n      {\n        "날짜": "3일차",\n        "장소": "롯데월드",\n        "장소 세부 정보": "서울의 대표적인 놀이공원으로 다양한 놀이기구와 쇼를 즐길 수 있습니다.",\n        "이미지 URL": "https://www.lotteworld.com/contents/images/main/main_visual_bg.jpg",\n        "지리 좌표": "37.5191, 127.0850",\n        "티켓 가격": "성인 60,000원",\n        "평가": 4.4,\n        "시간 여행": "오전 10시: 롯데월드 입장하여 다양한 놀이기구를 즐기고 쇼를 관람합니다. 12시: 롯데월드 내 식당에서 점심을 즐깁니다. 2시: 롯데월드 어드벤처를 즐기고 롯데월드 아이스링크에서 스케이트를 즐길 수도 있습니다. 5시: 롯데월드에서 나와 숙소로 돌아와 휴식을 취합니다. 7시: 서울 강남 지역의 맛집에서 저녁 식사를 즐기며 서울의 밤을 만끽합니다."\n      }\n    ]\n  }\n}\n```',
        },
      ],
    },
  ],
});
